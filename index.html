<!DOCTYPE html>
<head>
    <meta charset="utf-8"/>
</head>
<style>
    body, html {
        height: 100%;
    }
    #title {
        color: black;
        text-align: center;
        margin-top: 2em;
        margin-bottom: 2em;
    }
    #play-game {
        padding: 0.75rem 0.75rem 0.75rem 0.75rem;
        font-size: 1.25rem;
        width: max-content;
    }
    .play-buttons {
        padding: 0.75rem 0.75rem 0.75rem 0.75rem;
        font-size: 1.25rem;
        margin: 0 0.5rem 0 0.5rem;
    }
    #page {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .player-names {
        font-size: 2rem;
        padding: 2rem 1rem 2rem 1rem;
    }
    .player-scores {
        font-size: 7rem;
        padding: 0 3rem 0 3rem;
    }
    .flex-container-row {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
    }
    .flex-container-column {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
</style>

<html>
    
    <body>
        <div id="page">
            <h1 id="title">Rock Paper Scissors</h1>
            <button id="play-game">Play Game</button>
            <div id="info" class="flex-container-row">
                <div id="player-info" class="flex-container-column"></div>
                <div id="computer-info" class="flex-container-column"></div>
            </div>
            <div id="play-button-container"></div>
            <div id="results-list"></div>
        </div>
    </body>

    <script>
        // -----------------------------------------------------------------------------
        // Setting up the Name and Score of the Player
        const playerName = document.createElement('div');
        playerName.className = 'player-names';
        playerName.textContent = 'Player';

        let playerScore = document.createElement('div');
        playerScore.className = 'player-scores';
        playerScore.textContent = '1'; // Temporary

        const playerInfo = document.querySelector('#player-info');
        playerInfo.appendChild(playerName);
        playerInfo.appendChild(playerScore);
        // -----------------------------------------------------------------------------
        // Setting up the Name and Score of the Computer
        const computerName = document.createElement('div');
        computerName.className = 'player-names';
        computerName.textContent = 'Computer';

        let computerScore = document.createElement('div');
        computerScore.className = 'player-scores';
        computerScore.textContent = '0'; // Temporary

        const computerInfo = document.querySelector('#computer-info');
        computerInfo.appendChild(computerName);
        computerInfo.appendChild(computerScore);
        // -----------------------------------------------------------------------------
        // Setting up the play buttons for the game
        const playButtonContainer = document.querySelector('#play-button-container');
        playButtonContainer.className = 'flex-container-row';
        playButtonContainer.style.paddingTop = '2rem';

        const rock = document.createElement('button');
        rock.className = 'play-buttons';
        rock.textContent = 'Rock';

        const paper = document.createElement('button');
        paper.className = 'play-buttons';
        paper.textContent = 'Paper';

        const scissors = document.createElement('button');
        scissors.className = 'play-buttons';
        scissors.textContent = 'Scissors';

        playButtonContainer.appendChild(rock);
        playButtonContainer.appendChild(paper);
        playButtonContainer.appendChild(scissors);
        // -----------------------------------------------------------------------------
        // Setting up the button to start plaing the game
        const playButton = document.querySelector('#play-game');
        playButton.addEventListener('click', playGame());
        // -----------------------------------------------------------------------------
        // Plays a round of the game using the player's action choice
        playButtonContainer.addEventListener('click', event => {
            let playerSelection = event.target.textContent;
            let computerSelection = computerPlay();
            console.log(`playerSelection = ${playerSelection}`);
            outcome = playRound(playerSelection, computerSelection);
        });
        // -----------------------------------------------------------------------------
        // Generates a randomized action for the Computer
        function computerPlay() {
            let action = Math.floor(Math.random() * 3) + 1;
            switch (action) {
                case 1:
                    return "Rock";
                case 2:
                    return "Paper";
                case 3:
                    return "Scissors";
                default:
                    console.log(`Oops, something went wrong! Action = ${action}`);
            }
            /* 
            * Test cases for the random integer generator between 1 and 3
            * console.log(`Test of bounds of 1: 0.0000 -> ${Math.floor(0.0000*3) + 1}`);
            * console.log(`Test of bounds of 1: 0.0001 -> ${Math.floor(0.0001*3) + 1}`);
            * console.log(`Test of bounds of 1: 0.3333 -> ${Math.floor(0.3333*3) + 1}`);
            * console.log(`Test of bounds of 2: 0.3334 -> ${Math.floor(0.3334*3) + 1}`);
            * console.log(`Test of bounds of 2: 0.6666 -> ${Math.floor(0.6666*3) + 1}`);
            * console.log(`Test of bounds of 3: 0.6667 -> ${Math.floor(0.6667*3) + 1}`);
            * console.log(`Test of bounds of 3: 0.9999 -> ${Math.floor(0.9999*3) + 1}`);
            */
        }

        /* 
        *  Plays a round of Rock, Paper, Scissors and determines a winner.  
        *
        *  @param   playerSelection The player's selected action
        *  @param   computerSelection The computer's randomly generated action
        *  @return  A string that indicates the outcome of a round of the game
        */
        function playRound(playerSelection, computerSelection) {

            if(playerSelection == computerSelection) {
                // Results in a Draw
                console.log(`It's a Draw! You both played ${computerSelection}`);
                return 0;

            } else if(playerSelection == "Rock" && computerSelection == "Paper"
                || playerSelection == "Paper" && computerSelection == "Scissors"
                || playerSelection == "Scissors" && computerSelection == "Rock") {
                // Results in a Player Loss
                console.log(`You Lose! ${computerSelection} beats ${playerSelection}`);
                return -1;

            } else if(playerSelection == "Rock" && computerSelection == "Scissors"
                || playerSelection == "Paper" && computerSelection == "Rock"
                || playerSelection == "Scissors" && computerSelection == "Paper") {
                // Results in a Player Win
                console.log(`You Win! ${playerSelection} beats ${computerSelection}`);
                return 1;
            } else {
                // Invalid prompt response
                console.log(`Invalid action.`);
                return -2;
            }
        }

        /* 
        *  Plays a game of Rock, Paper, Scissors and determines a winner.
        *  A player can face off against a computer in a best of 3 series.
        *
        *  @param   None
        *  @return  None
        */
        function game() {

            // Variables for the player scores
            let playerScore = 0;
            let computerScore = 0;
            let outcome;

            while (playerScore <= 5 && computerScore <= 5) {
                
                // Determines the outcome of the round
                switch (outcome) {
                    case 0:
                        // This is a draw so do nothing
                        console.log(`The round is a draw! You both played ${computerSelection}\n`);
                        break;
                    case 1:
                        // Player wins round
                        playerScore ++;
                        console.log(`You win the round! ${playerSelection} beats ${computerSelection}`);
                        break;
                    case -1:
                        // Computer wins round
                        computerScore ++;
                        console.log(`You lose the round! ${computerSelection} beats ${playerSelection}`);                
                        break;
                    case -2:
                        // Invalid input from user
                        console.log(`Invalid outcome`);
                        break;
                    default:
                        console.log(`Oops, something went wrong! Invalid outcome of: ${outcome}`);
                        break;
                }
                // Resets the ongoing outcome flag
                outcome = 0;
            }

            // Final score declaration
            (playerScore > computerScore)
                ? window.alert(`Congratulations! You beat the Computer by a score of ${playerScore}-${computerScore}`)
                : window.alert(`Devastating! The Computer beat you by a score of ${computerScore}-${playerScore}`);
        }

        /* 
        *  Sets up a session to play Rock, Paper, Scissors.
        *  Lets the player continue playing after each game if desired.
        *
        *  @param   None
        *  @return  None
        */
        function playGame() {
            
            let continuePlay = true;
            
            while(continuePlay) {

                // Plays the game
                game();
            
                // Asks the player if they would like to continue
                let response = window.prompt(`Would you like to continue playing? (y or n)`);

                switch (response) {
                    case "y":
                        continuePlay = true;
                        break;
                    case "n":
                        continuePlay = false;
                    default:
                        console.log(`Invalid input of: ${response}`);
                        break;
                }
            }
        }

    </script>
</html>